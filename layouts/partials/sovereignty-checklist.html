<aside class="tool-detail-sidebar">
  {{ with .score }}
  {{ $range := strings.TrimSpace (partial "score-range.html" .sovereignty_score) }}
  <div class="card score-card">
    <h2 class="section-title">{{ i18n "label_sovereignty_score" }}</h2>
    <a href="{{ "/sovereignty-score/" | relURL }}" class="score-badge score-badge-sidebar score-badge-range-{{ $range }}{{ if eq .score_confidence "low" }} score-confidence-low{{ end }}">
      <span class="score-badge-value">{{ .sovereignty_score }}</span>
      <span class="score-badge-label">/ 10</span>
    </a>
    <p class="score-confidence-hint text-small text-muted">{{ .score_confidence }} confidence</p>
    <details class="score-breakdown">
      <summary class="text-small">{{ i18n "label_sovereignty_checklist" }} (breakdown)</summary>
      <ul class="score-breakdown-list text-small">
        <li>Legal jurisdiction: {{ .sovereignty_breakdown.legal_jurisdiction }}</li>
        <li>Data control: {{ .sovereignty_breakdown.data_control }}</li>
        <li>Openness: {{ .sovereignty_breakdown.openness }}</li>
        <li>Lock-in: {{ .sovereignty_breakdown.lock_in }}</li>
        <li>Operational autonomy: {{ .sovereignty_breakdown.operational_autonomy }}</li>
      </ul>
    </details>
  </div>
  {{ end }}
  <div class="card">
    <h2 class="section-title">{{ i18n "label_sovereignty_checklist" }}</h2>
    <div class="checklist">
      <div class="checklist-row">
        <span class="checklist-label">{{ i18n "label_eu_company" }}</span>
        <span class="checklist-value">{{ if .tool.eu_company }}<span class="badge badge-highlight">{{ i18n "badge_yes" }}</span>{{ else }}<span class="badge badge-neutral">{{ i18n "badge_no" }}</span>{{ end }}</span>
      </div>
      <div class="checklist-row">
        <span class="checklist-label">{{ i18n "label_data_residency" }}</span>
        <span class="checklist-value"><span class="badge badge-neutral">{{ i18n (printf "data_residency_%s" (lower .tool.data_residency)) | default .tool.data_residency }}</span></span>
      </div>
      <div class="checklist-row">
        <span class="checklist-label">{{ i18n "label_open_source" }}</span>
        <span class="checklist-value">
          {{ if .tool.open_source }}
            <span class="meta-icon-wrap meta-icon-yes" aria-hidden="true">{{ partial "icon.html" (dict "name" "check" "style" "solid" "size" 20 "class" "meta-icon-svg") }}</span>
            <span class="sr-only">{{ i18n "badge_yes" }}</span>
          {{ else }}
            <span class="meta-icon-wrap meta-icon-no" aria-hidden="true">{{ partial "icon.html" (dict "name" "x-mark" "style" "solid" "size" 20 "class" "meta-icon-svg") }}</span>
            <span class="sr-only">{{ i18n "badge_no" }}</span>
          {{ end }}
        </span>
      </div>
      <div class="checklist-row">
        <span class="checklist-label">{{ i18n "label_self_hostable" }}</span>
        <span class="checklist-value">
          {{ if .tool.self_hostable }}
            <span class="meta-icon-wrap meta-icon-yes" aria-hidden="true">{{ partial "icon.html" (dict "name" "check" "style" "solid" "size" 20 "class" "meta-icon-svg") }}</span>
            <span class="sr-only">{{ i18n "badge_yes" }}</span>
          {{ else }}
            <span class="meta-icon-wrap meta-icon-no" aria-hidden="true">{{ partial "icon.html" (dict "name" "x-mark" "style" "solid" "size" 20 "class" "meta-icon-svg") }}</span>
            <span class="sr-only">{{ i18n "badge_no" }}</span>
          {{ end }}
        </span>
      </div>
      <div class="checklist-row">
        <span class="checklist-label">{{ i18n "label_countries" }}</span>
        <span class="checklist-value">{{ partial "country-flags.html" .tool.countries }}</span>
      </div>
      {{ if .tool.last_reviewed }}
      <div class="checklist-row">
        <span class="checklist-label">{{ i18n "label_last_reviewed" }}</span>
        <span class="checklist-value">{{ .tool.last_reviewed }}</span>
      </div>
      {{ end }}
    </div>
  </div>
</aside>
